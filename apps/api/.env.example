# 应用环境名称
ENVIRONMENT=dev

# 推荐：优先使用仓库根目录 `.env`（参考 `<repo_root>/.env.example`）统一管理配置。
# 该文件保留用于兼容单应用配置，变量与根目录 `.env` 一致。

# 数据库连接（本地 infra/docker-compose.dev.yml 中的 Postgres）
DATABASE_URL=postgresql+psycopg://z_image:z_image@localhost:5432/z_image

# Redis 连接（同时作为 Celery broker 和 result backend）
REDIS_URL=redis://localhost:6379/0

# 模型根目录（可选），默认使用 <repo_root>/models
# MODELS_DIR=/absolute/path/to/Z-Image-app/models

# ---- API 鉴权（可选） ----
# 是否启用简单 API Key 鉴权（默认 false；本地开发可保持关闭）。
# 开启后，/v1/images/generate 和 /v1/tasks/{task_id} 需要提供 X-Auth-Key。
# API_ENABLE_AUTH=true

# 管理员 Key，可访问所有任务；普通调用方使用自己的 Key 只能访问自己创建的任务。
# 该 Key 不需要出现在白名单中，始终被视为有效。
# API_ADMIN_KEY=your-admin-key-here

# （可选）普通调用方的 API Key 白名单，逗号分隔。
# 如果配置了该变量，则只有白名单中的 Key（以及 API_ADMIN_KEY）可以访问服务。
# 例如：API_ALLOWED_KEYS=user-key-1,user-key-2
# API_ALLOWED_KEYS=

# Z-Image 推理相关配置
# 使用的变体：turbo / base / edit（当前主要为 turbo）
Z_IMAGE_VARIANT=turbo

# 可选：覆盖默认远端模型 ID（不设置时使用 libs/py_core/z_image_pipeline.py 中的默认值）
# Z_IMAGE_MODEL_ID=Tongyi-MAI/Z-Image-Turbo

# ---- 生成图片存储（Local / S3 / MinIO）----
# 默认存储后端为 local（落到本地磁盘 outputs/z-image-outputs 并由 API 静态挂载）。
# 如需“平稳过渡到 MinIO / 上云”，推荐改为 s3，并配置下方 S3_* 变量：
#
# 本地磁盘（legacy）：
# Z_IMAGE_STORAGE_BACKEND=local
# Z_IMAGE_OUTPUT_DIR=outputs/z-image-outputs
#
# MinIO（推荐：infra/docker-compose.dev.yml 已内置 minio + 自动建桶）：
Z_IMAGE_STORAGE_BACKEND=s3
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=z-image
# 可选：对象 Key 前缀（相当于“目录”），默认 z-image-outputs
S3_PREFIX=z-image-outputs
